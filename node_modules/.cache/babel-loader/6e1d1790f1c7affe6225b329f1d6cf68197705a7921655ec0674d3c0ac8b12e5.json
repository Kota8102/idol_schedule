{"ast":null,"code":"import _createForOfIteratorHelper from \"/workspaces/react/myapp/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/workspaces/react/myapp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/workspaces/react/myapp/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/workspaces/react/myapp/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/workspaces/react/myapp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { Component, createRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport { Calendar } from '@fullcalendar/core';\nimport { CustomRenderingStore } from '@fullcalendar/core/internal';\nvar FullCalendar = /*#__PURE__*/function (_Component) {\n  _inherits(FullCalendar, _Component);\n  var _super = _createSuper(FullCalendar);\n  function FullCalendar() {\n    var _this;\n    _classCallCheck(this, FullCalendar);\n    _this = _super.apply(this, arguments);\n    _this.elRef = createRef();\n    _this.needsCustomRenderingResize = false;\n    _this.isInitialRender = true;\n    _this.state = {\n      customRenderingMap: new Map()\n    };\n    return _this;\n  }\n  _createClass(FullCalendar, [{\n    key: \"render\",\n    value: function render() {\n      var portalNodes = [];\n      var _iterator = _createForOfIteratorHelper(this.state.customRenderingMap.values()),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var customRendering = _step.value;\n          var generatorMeta = customRendering.generatorMeta;\n          var vnode = typeof generatorMeta === 'function' ? generatorMeta(customRendering.renderProps) : generatorMeta;\n          portalNodes.push(createPortal(vnode, customRendering.containerEl, customRendering.id));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return React.createElement(\"div\", {\n        ref: this.elRef\n      }, portalNodes);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var customRenderingStore = new CustomRenderingStore();\n      this.calendar = new Calendar(this.elRef.current, Object.assign(Object.assign({}, this.props), {\n        handleCustomRendering: customRenderingStore.handle.bind(customRenderingStore),\n        customRenderingMetaMap: this.props\n      }));\n      this.calendar.render();\n      customRenderingStore.subscribe(function (customRenderingMap) {\n        if (_this2.isInitialRender) {\n          _this2.doCustomRendering(customRenderingMap);\n        } else {\n          _this2.requestCustomRendering(customRenderingMap);\n        }\n      });\n    }\n  }, {\n    key: \"requestCustomRendering\",\n    value: function requestCustomRendering(customRenderingMap) {\n      var _this3 = this;\n      this.cancelCustomRendering();\n      this.customRenderingRequestId = requestAnimationFrame(function () {\n        FullCalendar.act(function () {\n          _this3.doCustomRendering(customRenderingMap);\n        });\n      });\n    }\n  }, {\n    key: \"doCustomRendering\",\n    value: function doCustomRendering(customRenderingMap) {\n      this.needsCustomRenderingResize = true;\n      this.setState({\n        customRenderingMap: customRenderingMap\n      });\n    }\n  }, {\n    key: \"cancelCustomRendering\",\n    value: function cancelCustomRendering() {\n      if (this.customRenderingRequestId) {\n        cancelAnimationFrame(this.customRenderingRequestId);\n        this.customRenderingRequestId = undefined;\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      this.isInitialRender = false;\n      var updates = computeUpdates(prevProps, this.props);\n      if (Object.keys(updates).length) {\n        this.calendar.resetOptions(Object.assign(Object.assign({}, updates), {\n          customRenderingMetaMap: this.props\n        }), true);\n      }\n      if (this.needsCustomRenderingResize) {\n        this.needsCustomRenderingResize = false;\n        this.calendar.updateSize();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.calendar.destroy();\n      this.cancelCustomRendering();\n    }\n  }, {\n    key: \"getApi\",\n    value: function getApi() {\n      return this.calendar;\n    }\n  }]);\n  return FullCalendar;\n}(Component);\nexport { FullCalendar as default };\nFullCalendar.act = function (f) {\n  f();\n};\n// Utils\nfunction computeUpdates(origObj, newObj) {\n  var updates = {};\n  if (newObj !== origObj) {\n    for (var key in newObj) {\n      if (newObj[key] !== origObj[key]) {\n        updates[key] = newObj[key];\n      }\n    }\n  }\n  return updates;\n}","map":{"version":3,"mappings":"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","names":["React","Component","createRef","createPortal","Calendar","CustomRenderingStore","FullCalendar","customRenderingMap","Map","portalNodes","state","values","customRendering","generatorMeta","vnode","renderProps","push","containerEl","id","ref","elRef","customRenderingStore","calendar","current","props","handleCustomRendering","handle","bind","customRenderingMetaMap","render","subscribe","isInitialRender","doCustomRendering","requestCustomRendering","cancelCustomRendering","customRenderingRequestId","requestAnimationFrame","act","needsCustomRenderingResize","setState","cancelAnimationFrame","undefined","prevProps","updates","computeUpdates","Object","keys","length","resetOptions","updateSize","destroy","f","origObj","newObj","key"],"sources":["/workspaces/react/myapp/node_modules/@fullcalendar/react/src/index.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { Component, createRef, ReactPortal } from 'react'\nimport { createPortal } from 'react-dom'\nimport {\n  CalendarOptions,\n  CalendarApi,\n  Calendar,\n} from '@fullcalendar/core'\nimport {\n  CustomRendering,\n  CustomRenderingStore,\n} from '@fullcalendar/core/internal'\n\ninterface CalendarState {\n  customRenderingMap: Map<string, CustomRendering<any>>\n}\n\nexport default class FullCalendar extends Component<CalendarOptions, CalendarState> {\n  static act = (f: () => void) => { f() }\n\n  private elRef = createRef<HTMLDivElement>()\n  private calendar: Calendar\n  private customRenderingRequestId: any\n  private needsCustomRenderingResize = false\n  private isInitialRender = true\n\n  state: CalendarState = {\n    customRenderingMap: new Map<string, CustomRendering<any>>()\n  }\n\n  render() {\n    const portalNodes: ReactPortal[] = []\n\n    for (const customRendering of this.state.customRenderingMap.values()) {\n      const { generatorMeta } = customRendering\n      const vnode = typeof generatorMeta === 'function' ?\n        generatorMeta(customRendering.renderProps) :\n        generatorMeta\n\n      portalNodes.push(\n        createPortal(\n          vnode,\n          customRendering.containerEl,\n          customRendering.id, // key\n        )\n      )\n    }\n\n    return (\n      <div ref={this.elRef}>\n        {portalNodes}\n      </div>\n    )\n  }\n\n  componentDidMount() {\n    const customRenderingStore = new CustomRenderingStore<unknown>()\n\n    this.calendar = new Calendar(this.elRef.current, {\n      ...this.props,\n      handleCustomRendering: customRenderingStore.handle.bind(customRenderingStore),\n      customRenderingMetaMap: this.props, // render functions are given as props\n    })\n\n    this.calendar.render()\n\n    customRenderingStore.subscribe((customRenderingMap) => {\n      if (this.isInitialRender) {\n        this.doCustomRendering(customRenderingMap)\n      } else {\n        this.requestCustomRendering(customRenderingMap)\n      }\n    })\n  }\n\n  requestCustomRendering(customRenderingMap) {\n    this.cancelCustomRendering()\n    this.customRenderingRequestId = requestAnimationFrame(() => {\n      FullCalendar.act(() => {\n        this.doCustomRendering(customRenderingMap)\n      })\n    })\n  }\n\n  doCustomRendering(customRenderingMap) {\n    this.needsCustomRenderingResize = true\n    this.setState({ customRenderingMap })\n  }\n\n  cancelCustomRendering() {\n    if (this.customRenderingRequestId) {\n      cancelAnimationFrame(this.customRenderingRequestId)\n      this.customRenderingRequestId = undefined\n    }\n  }\n\n  componentDidUpdate(prevProps: CalendarOptions) {\n    this.isInitialRender = false\n\n    const updates = computeUpdates(prevProps, this.props)\n\n    if (Object.keys(updates).length) {\n      this.calendar.resetOptions({\n        ...updates,\n        customRenderingMetaMap: this.props,\n      }, true)\n    }\n\n    if (this.needsCustomRenderingResize) {\n      this.needsCustomRenderingResize = false\n      this.calendar.updateSize()\n    }\n  }\n\n  componentWillUnmount() {\n    this.calendar.destroy()\n    this.cancelCustomRendering()\n  }\n\n  getApi(): CalendarApi {\n    return this.calendar\n  }\n}\n\n// Utils\n\nfunction computeUpdates(origObj: any, newObj: any): any {\n  const updates: any = {}\n\n  if (newObj !== origObj) {\n    for (const key in newObj) {\n      if (newObj[key] !== origObj[key]) {\n        updates[key] = newObj[key]\n      }\n    }\n  }\n\n  return updates\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}